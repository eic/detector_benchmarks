sim:nhcal_dimuon_fotoproduction:
  extends: .det_benchmark
  stage: simulate
  script:
    - snakemake $SNAKEMAKE_FLAGS --cores 1 sim_output/nhcal_dimuon_fotoproduction/sim_epic_full.0.edm4hep.root

bench:nhcal_dimuon_fotoproduction_analysis:
  extends: .det_benchmark
  stage: benchmarks
  needs:
    - "sim:nhcal_dimuon_fotoproduction"
  script:
    - snakemake $SNAKEMAKE_FLAGS --cores 1 results/nhcal_dimuon_fotoproduction/analysis_epic_full_1files.pdf

collect_results:nhcal_dimuon_fotoproduction:
  extends: .det_benchmark
  stage: collect
  needs: 
    - "bench:nhcal_dimuon_fotoproduction_analysis"
  script:
    - ls -lrht
    - mv results{,_save}/ 
    - snakemake $SNAKEMAKE_FLAGS --cores 1 --delete-all-output results/nhcal_dimuon_fotoproduction/analysis_epic_full_1files.pdf
    - mv results{_save,}/
